<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go6 Mail</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.sell.app/embed/style.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        :root {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --bg-dark: #0f172a;
            --card-bg: #1e293b;
            --border: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --success: #10b981;
            --success-hover: #059669;
            --error: #ef4444;
            --warning: #f59e0b;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.2);
            --radius: 8px;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
        }

        .navbar {
            background-color: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            color: var(--text-primary);
        }

        .nav-brand-icon {
            font-size: 1.5rem;
            color: var(--primary);
        }

        .nav-brand-text {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
        }

        .nav-link:hover {
            color: var(--text-primary);
            background-color: rgba(255, 255, 255, 0.05);
        }

        .nav-link.active {
            color: var(--primary);
            background-color: rgba(59, 130, 246, 0.1);
        }

        .nav-link.mails-active {
            color: var(--text-primary);
            background-color: transparent;
        }

        .nav-link.discord {
            background-color: #5865F2;
            color: white;
        }

        .nav-link.discord:hover {
            background-color: #4752C4;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .logo-icon {
            font-size: 2rem;
            color: var(--primary);
        }

        .logo-text {
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .tagline {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .auth-screen {
            width: 100%;
            max-width: 420px;
            margin: 0 auto;
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 2.5rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
        }

        .auth-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-align: center;
            color: var(--text-primary);
        }

        .auth-subtitle {
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .auth-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .btn {
            padding: 0.875rem 1.5rem;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            border: none;
            outline: none;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
            border: 1px solid var(--primary);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.05);
            border-color: var(--primary);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn i {
            font-size: 1rem;
        }

        .dashboard {
            width: 100%;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .dashboard-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .dashboard-subtitle {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .balance-card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            margin-bottom: 2rem;
        }

        .balance-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .balance-info {
            flex: 1;
            min-width: 300px;
        }

        .balance-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .balance-amount {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .balance-subtext {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }

        .topup-btn-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 180px;
        }

        .topup-btn {
            background-color: var(--success);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 0.875rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            width: 100%;
        }

        .topup-btn:hover {
            background-color: var(--success-hover);
        }

        .topup-note {
            color: var(--text-muted);
            font-size: 0.8rem;
            text-align: center;
            margin-top: 0.75rem;
            line-height: 1.4;
        }

        .action-buttons {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .key-display {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid var(--border);
            position: relative;
            word-break: break-all;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .key-label {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .copy-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--primary);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: var(--radius);
            padding: 0.375rem 0.75rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .copy-btn:hover {
            background-color: rgba(59, 130, 246, 0.2);
        }

        .copy-btn.copied {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }

        .logout-btn {
            background-color: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 0.625rem 1.25rem;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logout-btn:hover {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--error);
            border-color: var(--error);
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-label {
            display: block;
            color: var(--text-secondary);
            margin-bottom: 0.375rem;
            font-size: 0.95rem;
        }

        .input-field {
            width: 100%;
            padding: 0.875rem;
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .login-form-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .loader {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .instructions-panel {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.75rem;
            border: 1px solid var(--border);
            margin-bottom: 2rem;
        }

        .instructions-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .instructions-list {
            list-style-type: none;
        }

        .instructions-list li {
            margin-bottom: 0.75rem;
            color: var(--text-secondary);
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .instructions-list li i {
            color: var(--primary);
            margin-top: 0.125rem;
            font-size: 0.9rem;
        }

        .docs-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        .docs-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .docs-description {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 3rem;
            line-height: 1.6;
        }

        .endpoint-section {
            margin-bottom: 3rem;
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 2rem;
            border: 1px solid var(--border);
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .endpoint-method {
            background-color: var(--primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .endpoint-path {
            font-family: 'SF Mono', monospace;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .endpoint-description {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .param-section {
            margin-bottom: 2rem;
        }

        .param-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
        }

        .param-table th {
            background-color: rgba(0, 0, 0, 0.2);
            color: var(--text-secondary);
            padding: 0.75rem 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            border: 1px solid var(--border);
        }

        .param-table td {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            color: var(--text-primary);
        }

        .param-required {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--error);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .param-optional {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--primary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .code-block {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 1px solid var(--border);
            overflow-x: auto;
        }

        .code-block pre {
            font-family: 'SF Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            color: var(--text-primary);
            margin: 0;
        }

        .code-block code {
            font-family: 'SF Mono', monospace;
        }

        .response-section {
            margin-top: 2rem;
        }

        .response-example {
            background-color: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .response-example h4 {
            color: var(--success);
            margin-bottom: 1rem;
        }

        .response-example.error {
            background-color: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.2);
        }

        .response-example.error h4 {
            color: var(--error);
        }

        .mails-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        .mails-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .mails-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 2rem;
        }

        .mails-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .search-container {
            display: flex;
            gap: 0.5rem;
            flex: 1;
            min-width: 300px;
        }

        .search-input {
            flex: 1;
            padding: 0.875rem;
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .refresh-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 0.875rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .refresh-btn:hover {
            background-color: var(--primary-dark);
        }

        .refresh-btn.loading {
            opacity: 0.7;
            cursor: not-allowed;
        }

.mails-grid {
    margin-bottom: 3rem;
}

.mails-table-container {
    background-color: var(--card-bg);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    overflow: hidden;
    margin-bottom: 3rem;
}

.mails-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.95rem;
}

.mails-table th {
    background-color: rgba(0, 0, 0, 0.2);
    color: var(--text-secondary);
    padding: 1rem 1.25rem;
    text-align: left;
    font-weight: 600;
    font-size: 0.9rem;
    border-bottom: 1px solid var(--border);
    user-select: none;
}

.mails-table td {
    padding: 1rem 1.25rem;
    color: var(--text-primary);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    vertical-align: middle;
}

.mails-table tbody tr {
    transition: all 0.2s ease;
    cursor: pointer;
}

.mails-table tbody tr:hover {
    background-color: rgba(59, 130, 246, 0.1);
}

.mails-table tbody tr:last-child td {
    border-bottom: none;
}

.status-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.8rem;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-weight: 500;
}

.status-active {
    background-color: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.status-inactive {
    background-color: rgba(148, 163, 184, 0.1);
    color: var(--text-muted);
}

.table-actions {
    display: flex;
    gap: 0.5rem;
}

.table-btn {
    padding: 0.375rem 0.75rem;
    background-color: rgba(59, 130, 246, 0.1);
    color: var(--primary);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: var(--radius);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    white-space: nowrap;
}

.table-btn:hover {
    background-color: rgba(59, 130, 246, 0.2);
    transform: translateY(-1px);
}

.table-btn.view {
    background-color: rgba(16, 185, 129, 0.1);
    color: var(--success);
    border-color: rgba(16, 185, 129, 0.3);
}

.table-btn.view:hover {
    background-color: rgba(16, 185, 129, 0.2);
}

.table-btn.copy {
    background-color: rgba(168, 85, 247, 0.1);
    color: #a855f7;
    border-color: rgba(168, 85, 247, 0.3);
}

.table-btn.copy:hover {
    background-color: rgba(168, 85, 247, 0.2);
}

.email-cell {
    font-weight: 500;
    word-break: break-all;
}

@media (max-width: 768px) {
    .mails-table {
        display: block;
        overflow-x: auto;
    }
    
    .mails-table th,
    .mails-table td {
        padding: 0.75rem 0.5rem;
        min-width: 120px;
    }
    
    .table-actions {
        flex-wrap: wrap;
    }
    
    .table-btn {
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
    }
}

.mailbox-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 1.5rem;
}

.mailbox-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
}

.mailbox-title {
    font-size: 1.75rem;
    font-weight: 600;
    color: var(--text-primary);
}

.mailbox-subtitle {
    color: var(--text-secondary);
    font-size: 0.95rem;
    margin-top: 0.25rem;
}

        .back-btn {
            background-color: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 0.625rem 1.25rem;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .emails-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .email-item {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid var(--border);
            transition: all 0.2s ease;
        }

        .email-item:hover {
            border-color: var(--primary);
        }

        .email-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .email-sender {
            font-weight: 600;
            color: var(--text-primary);
        }

        .email-time {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .email-subject {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .email-body {
            color: var(--text-secondary);
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .email-body pre {
            font-family: inherit;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .no-emails {
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
        }

        .no-emails i {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .footer {
            margin-top: 3rem;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
            width: 100%;
        }

        .notification {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            padding: 1rem 1.5rem;
            border-radius: var(--radius);
            color: white;
            font-weight: 500;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            transform: translateY(100%);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            max-width: 350px;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification.success {
            background-color: var(--success);
        }

        .notification.error {
            background-color: var(--error);
        }

        .notification.warning {
            background-color: var(--warning);
        }

        .notification.info {
            background-color: var(--primary);
        }

        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            
            .nav-links {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .container, .docs-container, .mails-container, .mailbox-container {
                padding: 1.5rem 1rem;
            }
            
            .logo-text {
                font-size: 1.75rem;
            }
            
            .auth-screen {
                padding: 2rem 1.5rem;
            }
            
            .balance-amount {
                font-size: 2rem;
            }
            
            .dashboard-header, .mailbox-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .balance-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .balance-info {
                min-width: 100%;
            }
            
            .topup-btn-container {
                width: 100%;
            }
            
            .mails-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-container {
                min-width: 100%;
            }
            
            .mails-grid {
                grid-template-columns: 1fr;
            }
            
            .notification {
                left: 1rem;
                right: 1rem;
                max-width: none;
            }
        }

        .balance-main {
            color: var(--text-primary);
        }
        
        .balance-muted {
            color: var(--text-muted);
            font-weight: 400;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-lg);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: var(--radius);
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            color: var(--error);
            background-color: rgba(239, 68, 68, 0.1);
        }

        .domain-separator {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
            color: var(--text-secondary);
        }

        .domain-separator::before,
        .domain-separator::after {
            content: "";
            flex: 1;
            height: 1px;
            background-color: var(--border);
        }

        .domain-separator span {
            padding: 0 1rem;
            font-size: 0.9rem;
        }

        .domains-section {
            margin-bottom: 1.5rem;
        }

        .domains-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
        }

        .domains-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .domain-btn {
            padding: 0.75rem;
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            font-size: 0.9rem;
        }

        .domain-btn:hover {
            background-color: rgba(59, 130, 246, 0.1);
            border-color: var(--primary);
            color: var(--text-primary);
        }

        .domain-btn.selected {
            background-color: rgba(59, 130, 246, 0.2);
            border-color: var(--primary);
            color: var(--primary);
            font-weight: 500;
        }

        .no-domains {
            text-align: center;
            padding: 1rem;
            color: var(--text-muted);
            font-style: italic;
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: var(--radius);
            border: 1px dashed var(--border);
        }

        .modal-loading {
            text-align: center;
            padding: 2rem;
        }

        .modal-loading .loader {
            width: 40px;
            height: 40px;
            margin: 0 auto 1rem;
        }

        .modal-result {
            text-align: center;
            padding: 1rem;
        }

        .result-success {
            background-color: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .result-error {
            background-color: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .result-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--success);
        }

        .result-error .result-title {
            color: var(--error);
        }

        .result-info {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .result-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-label {
            font-weight: 600;
            color: var(--text-secondary);
            min-width: 80px;
        }

        .result-value {
            font-family: 'SF Mono', monospace;
            color: var(--text-primary);
            word-break: break-all;
        }

        .copy-result-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin: 0 auto;
        }

        .copy-result-btn:hover {
            background-color: var(--primary-dark);
        }

        .create-mail-btn {
            background-color: var(--success);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 0.875rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .create-mail-btn:hover {
            background-color: var(--success-hover);
        }

        .create-mail-btn.loading {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .tutorial-section {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 2rem;
            border: 1px solid var(--border);
            margin-bottom: 2rem;
        }

        .tutorial-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .tutorial-steps {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .tutorial-step {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .step-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .step-image {
            width: 100%;
            max-width: 800px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .step-image img {
            width: 100%;
            height: auto;
            display: block;
        }

        .tutorial-note {
            color: var(--text-muted);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-top: 1rem;
            padding: 1rem;
            background-color: rgba(16, 185, 129, 0.1);
            border-radius: var(--radius);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .tutorial-note strong {
            color: var(--success);
        }

        .domain-management {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .domain-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .domain-card {
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: var(--radius);
            padding: 1.25rem;
            border: 1px solid var(--border);
            transition: all 0.2s ease;
        }

        .domain-card:hover {
            border-color: var(--primary);
        }

        .domain-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .domain-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
            word-break: break-all;
        }

        .domain-type {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--primary);
        }

        .domain-type.custom {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .domain-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .domain-action-btn {
            flex: 1;
            padding: 0.5rem;
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--primary);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: var(--radius);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
        }

        .domain-action-btn:hover {
            background-color: rgba(59, 130, 246, 0.2);
        }

        .domain-action-btn.remove {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--error);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .domain-action-btn.remove:hover {
            background-color: rgba(239, 68, 68, 0.2);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }


.price-card {
    background-color: var(--card-bg);
    border-radius: var(--radius);
    padding: 1.25rem;
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.2s ease;
    max-width: 300px;
    margin: 0 auto;
}

.price-card:hover {
    border-color: var(--primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow);
}

.price-icon {
    width: 40px;
    height: 40px;
    background-color: rgba(59, 130, 246, 0.1);
    border-radius: var(--radius);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary);
    font-size: 1rem;
    flex-shrink: 0;
}

.price-content {
    flex: 1;
    min-width: 0;
}

.price-title {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.price-amount {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    display: flex;
    align-items: baseline;
    gap: 0.25rem;
    line-height: 1;
}

.price-symbol {
    font-size: 0.9rem;
    color: var(--text-muted);
}

.price-note {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: 0.25rem;
    white-space: nowrap;
}

.dashboard-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

.price-card-container {
    grid-column: 1 / -1;
    justify-self: center;
    max-width: 400px;
    width: 100%;
}

@media (max-width: 768px) {
    .dashboard-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .price-card {
        max-width: 100%;
        padding: 1rem;
    }
    
    .price-icon {
        width: 36px;
        height: 36px;
    }
    
    .price-amount {
        font-size: 1.1rem;
    }
}

.mails-left-card {
    background-color: var(--card-bg);
    border-radius: var(--radius);
    padding: 2rem;
    box-shadow: var(--shadow);
    border: 1px solid var(--border);
    margin-bottom: 0;
}

.mails-left-card:hover {
    border-color: var(--success);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.mails-left-header {
    margin-bottom: 1.5rem;
}

.mails-left-label {
    color: var(--text-secondary);
    font-size: 0.95rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.mails-left-amount {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1;
    margin-bottom: 0.5rem;
}

.mails-left-count {
    color: var(--success);
}

.mails-left-subtext {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.dashboard-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
    align-items: stretch;
}

.price-card-row {
    grid-column: 1 / -1;
    display: flex;
    justify-content: center;
    margin-top: 1rem;
}

.price-card {
    max-width: 400px;
    width: 100%;
}

@media (max-width: 1200px) {
    .dashboard-grid {
        grid-template-columns: 1fr 1fr;
    }
}

@media (max-width: 768px) {
    .dashboard-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .price-card-row {
        margin-top: 0;
    }
    
    .mails-left-card,
    .price-card {
        padding: 1rem;
    }
    
    .mails-left-icon,
    .price-icon {
        width: 36px;
        height: 36px;
    }
    
    .mails-left-amount,
    .price-amount {
        font-size: 1.1rem;
    }
}

.dashboard-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

@media (max-width: 1200px) {
    .dashboard-grid {
        grid-template-columns: 1fr 1fr;
    }
}

@media (max-width: 768px) {
    .dashboard-grid {
        grid-template-columns: 1fr;
    }
}

.password-field {
    position: relative;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.password-text {
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
    font-size: 0.9rem;
    background-color: rgba(0, 0, 0, 0.1);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    flex: 1;
    word-break: break-all;
}

.password-toggle {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 4px;
    transition: all 0.2s ease;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
}

.password-toggle:hover {
    background-color: rgba(59, 130, 246, 0.1);
    color: var(--primary);
}

.password-toggle.active {
    color: var(--primary);
}

.password-masked {
    font-family: 'Segoe UI', system-ui, sans-serif;
    letter-spacing: 0.1em;
    color: var(--text-muted);
}

.mails-table td.password-cell {
    vertical-align: middle;
    max-width: 200px;




}

.table-btn.share {
    background-color: rgba(245, 158, 11, 0.1);
    color: var(--warning);
    border-color: rgba(245, 158, 11, 0.3);
}

.table-btn.share:hover {
    background-color: rgba(245, 158, 11, 0.2);
}
        
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="nav-brand" onclick="showPage('home')">
                <i class="fas fa-envelope nav-brand-icon"></i>
                <span class="nav-brand-text">Go6 Mail</span>
            </a>
            <div class="nav-links" id="nav-links">
                <a href="#" class="nav-link active" onclick="showPage('home')">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="#" class="nav-link" onclick="showPage('domains')">
                    <i class="fas fa-globe"></i> Domains
                </a>
                <a href="#" class="nav-link" onclick="showPage('docs')">
                    <i class="fas fa-book"></i> Documentation
                </a>
                <a href="https://discord.gg/AyKuA4TSxh" class="nav-link discord" target="_blank">
                    <i class="fab fa-discord"></i> Join Discord
                </a>
            </div>
        </div>
    </nav>

    <div id="notification-container"></div>

    <div id="create-mail-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Create New Mail</h3>
                <button class="modal-close" onclick="closeCreateMailModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="modal-content">
            </div>
        </div>
    </div>
<div id="home-page" class="page-section active">
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-envelope logo-icon"></i>
                <h1 class="logo-text">Go6 Mail</h1>
            </div>
            <p class="tagline">Simple, Easy To implement, Cheap.</p>
        </div>

        <div id="auth-screen" class="auth-screen">
            <h2 class="auth-title">Welcome to Go6 Mail</h2>
            <p class="auth-subtitle">Please choose an option to continue</p>
            
            <div class="auth-buttons">
                <button id="create-key-btn" class="btn btn-primary">
                    <i class="fas fa-key"></i> Create New API Key
                </button>
                <button id="login-key-btn" class="btn btn-secondary">
                    <i class="fas fa-sign-in-alt"></i> Login with Existing Key
                </button>
            </div>

            <div id="login-form" class="input-group" style="display: none; margin-top: 2rem;">
                <label class="input-label" for="api-key-input">
                    <i class="fas fa-key"></i> Enter Your API Key
                </label>
                <input type="text" id="api-key-input" class="input-field" placeholder="Go6Mail-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                <div class="login-form-actions">
                    <button id="submit-login-btn" class="btn btn-primary" style="flex: 1;">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                    <button id="cancel-login-btn" class="btn btn-secondary" style="flex: 1;">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </div>
        </div>

        <div id="dashboard" class="dashboard" style="display: none;">
            <div class="dashboard-header">
                <div>
                    <h2 class="dashboard-title">Go6 Mail Dashboard</h2>
                    <p class="dashboard-subtitle">Manage your API key and balance</p>
                </div>
                <button id="logout-btn" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>

<div class="dashboard-grid">
    <div class="balance-card">
        <div class="balance-header" style="display: flex; align-items: flex-start; justify-content: space-between; flex-wrap: wrap; gap: 1.5rem;">
            <div class="balance-info" style="flex: 1; min-width: 250px;">
                <div class="balance-label">
                    <i class="fas fa-wallet"></i> Account Balance
                </div>
                <div style="display: flex; align-items: baseline; gap: 1rem; flex-wrap: wrap;">
                    <div class="balance-amount">
                        $<span id="balance-value"><span class="balance-main">0</span><span class="balance-muted">.00</span></span>
                    </div>
                    <div style="display: flex; gap: 0.75rem;">
                        <button id="refresh-balance-btn" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button
                            id="sell-app-topup-btn"
                            class="btn btn-primary"
                            data-sell-store="71781"
                            data-sell-product="341840"
                            data-sell-darkmode="true"
                            data-sell-theme=""
                            style="padding: 0.5rem 1rem; font-size: 0.9rem;"
                        >
                            <i class="fas fa-plus-circle"></i> Top Up
                        </button>
                    </div>
                </div>
                <p class="balance-subtext">Current available balance</p>
            </div>
        </div>
    </div>

    <div class="balance-card">
        <div class="key-display">
            <div class="key-label">
                <i class="fas fa-key"></i> Your API Key
            </div>
            <div id="api-key-display">No key loaded</div>
            <button id="copy-key-btn" class="copy-btn">
                <i class="fas fa-copy"></i> Copy
            </button>
        </div>
    </div>

<div class="mails-left-card">
    <div class="mails-left-header">
        <div class="mails-left-label">
            <i class="fas fa-envelope"></i> Mails You Can Create
        </div>
        <div class="mails-left-amount">
            <span id="mails-left-count" class="mails-left-count">0</span>
        </div>
        <div class="mails-left-subtext">Based on your balance and current price</div>
    </div>
</div>

    <div class="price-card-row">
        <div class="price-card">
            <div class="price-icon">
                <i class="fas fa-tag"></i>
            </div>
            <div class="price-content">
                <div class="price-title">Price per Mail</div>
                <div class="price-amount">
                    <span class="price-symbol">$</span>
                    <span id="price-value">0.001</span>
                </div>
                <div class="price-note">Current cost for creating an inbox</div>
            </div>
        </div>
    </div>
</div>

            <div class="footer">
                <p>Go6 Mail &copy; 2025 | By Gekkefries</p>
                <p style="margin-top: 0.5rem; font-size: 0.85rem;">Simple Temp Mail Api</p>
            </div>
        </div>
    </div>
</div>

<div id="domains-page" class="page-section">
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-globe logo-icon"></i>
                <h1 class="logo-text">Domain Management</h1>
            </div>
            <p class="tagline">Add and manage your custom domains</p>
        </div>

        <div id="domains-auth-screen" class="auth-screen">
            <h2 class="auth-title">Domain Management</h2>
            <p class="auth-subtitle">Please login to manage your domains</p>
            
            <div class="auth-buttons">
                <button id="domains-create-key-btn" class="btn btn-primary">
                    <i class="fas fa-key"></i> Create New API Key
                </button>
                <button id="domains-login-key-btn" class="btn btn-secondary">
                    <i class="fas fa-sign-in-alt"></i> Login with Existing Key
                </button>
            </div>

            <div id="domains-login-form" class="input-group" style="display: none; margin-top: 2rem;">
                <label class="input-label" for="domains-api-key-input">
                    <i class="fas fa-key"></i> Enter Your API Key
                </label>
                <input type="text" id="domains-api-key-input" class="input-field" placeholder="Go6Mail-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                <div class="login-form-actions">
                    <button id="domains-submit-login-btn" class="btn btn-primary" style="flex: 1;">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                    <button id="domains-cancel-login-btn" class="btn btn-secondary" style="flex: 1;">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </div>
        </div>

        <div id="domains-dashboard" class="dashboard" style="display: none;">
            <div class="dashboard-header">
                <div>
                    <h2 class="dashboard-title">Domain Management</h2>
                    <p class="dashboard-subtitle">Add and manage your custom domains</p>
                </div>
            </div>

            <div id="add-domain-section" class="instructions-panel">
                <h3 class="instructions-title">
                    <i class="fas fa-plus-circle"></i> Add Custom Domain
                </h3>
                
                <div class="add-domain-form" style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 250px;">
                        <input type="text" id="domain-input" class="input-field" placeholder="example.com">
                        <div id="domain-error" style="color: var(--error); font-size: 0.85rem; margin-top: 0.5rem; display: none;"></div>
                    </div>
                    <button id="add-domain-btn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Domain
                    </button>
                </div>
                
                <div class="domain-note" style="color: var(--text-muted); font-size: 0.9rem; line-height: 1.5; margin-top: 1rem; padding: 1rem; background-color: rgba(0, 0, 0, 0.1); border-radius: var(--radius); border: 1px dashed var(--border);">
                    <strong>Note:</strong> This domain will only be available for your API key. 
                    You must configure your domain's MX records to point to our mail server. 
                    See the setup tutorial below.
                </div>
            </div>

            <div class="tutorial-section">
                <h3 class="tutorial-title">
                    <i class="fas fa-graduation-cap"></i> Domain Setup Tutorial
                </h3>
                
                <div class="tutorial-steps">
                    <div class="tutorial-step">
                        <div class="step-number">1</div>
                        <div class="step-image">
                            <img src="step1.png" alt="Step 1: Access Domain DNS Settings">
                        </div>
                    </div>
                    
                    <div class="tutorial-step">
                        <div class="step-number">2</div>
                        <div class="step-image">
                            <img src="step2.png" alt="Step 2: Add MX Record">
                        </div>
                    </div>
                    
                    <div class="tutorial-step">
                        <div class="step-number">3</div>
                        <div class="step-image">
                            <img src="step3.png" alt="Step 3: Configure MX Priority">
                        </div>
                    </div>
                    
                    <div class="tutorial-step">
                        <div class="step-number">4</div>
                        <div class="step-image">
                            <img src="step4.png" alt="Step 4: Verify DNS Propagation">
                        </div>
                    </div>
                </div>
                
                <div class="tutorial-note">
                    <strong>Important:</strong> After adding your domain here, you must configure the MX records in your domain's DNS settings. 
                    The domain will only work for emails sent to your API key's inboxes.
                </div>
            </div>

            <div id="domains-management-section" class="instructions-panel" style="display: none;">
                <h3 class="instructions-title">
                    <i class="fas fa-globe"></i> Your Domains
                </h3>
                <div id="domains-container" class="domain-cards">
                </div>
            </div>

            <div id="no-domains-message" class="instructions-panel" style="text-align: center;">
                <i class="fas fa-globe" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                <h3>No Domains Added Yet</h3>
                <p>You haven't added any custom domains yet. Add your first domain using the form above.</p>
            </div>
        </div>

        <div class="footer">
            <p>Go6 Mail &copy; 2025 | Domain Management</p>
        </div>
    </div>
</div>
<div id="docs-page" class="page-section">
    <div class="docs-container">
        <h1 class="docs-title">API Documentation</h1>
        <p class="docs-description">
            Welcome to the Go6 Mail API documentation. This API provides temporary email services with 
            Discord verification URL extraction capabilities. All endpoints require authentication via API key.
        </p>

        <div class="instructions-panel">
            <h3 class="instructions-title">
                <i class="fas fa-server"></i> API Base URL
            </h3>
            <p>All API endpoints must be accessed through our main API URL. Get the current VPS URL first:</p>
            
            <div class="code-block">
                <pre><code>GET https://go6gen.pythonanywhere.com/vps_url

Response:
{
    "vps_url": "https://current-vps-url.go6mail.com"
}</code></pre>
            </div>
            
            <p>Then use the returned VPS URL for all API requests. For example:</p>
            
            <div class="code-block">
                <pre><code># Get VPS URL
response = requests.get("https://go6gen.pythonanywhere.com/vps_url")
vps_url = response.json()["vps_url"]

# Use it for API requests
response = requests.post(f"{vps_url}/create", json={
    "api_key": "Go6Mail-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "domain": "default"
})</code></pre>
            </div>
            
            <p><strong>Note:</strong> The VPS URL may change as we upgrade our infrastructure. Always fetch it from the main endpoint first.</p>
        </div>

        <div class="endpoint-section">
            <div class="endpoint-header">
                <span class="endpoint-method">POST</span>
                <span class="endpoint-path">/create</span>
            </div>
            
            <p class="endpoint-description">
                Creates a new temporary email inbox. Requires sufficient balance on your API key.
                The system will automatically deduct the current price from your balance upon successful creation.
            </p>

            <div class="param-section">
                <h3 class="param-title">
                    <i class="fas fa-paper-plane"></i> Request Payload
                </h3>
                
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Type</th>
                            <th>Required</th>
                            <th>Description</th>
                            <th>Default</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>api_key</td>
                            <td>string</td>
                            <td><span class="param-required">Required</span></td>
                            <td>Your Go6 Mail API key</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>domain</td>
                            <td>string</td>
                            <td><span class="param-optional">Optional</span></td>
                            <td>Domain for the email address. Use "default" for random domain, or specify a specific default domain or your custom domain. You can provide either just the domain name (example.com) or full email address (username@example.com).</td>
                            <td>"default"</td>
                        </tr>
                        <tr>
                            <td>username</td>
                            <td>string</td>
                            <td><span class="param-optional">Optional</span></td>
                            <td>Custom username for the inbox. Must be 3-32 alphanumeric characters. If not provided, a random username will be generated.</td>
                            <td>Random username</td>
                        </tr>
                        <tr>
                            <td>password</td>
                            <td>string</td>
                            <td><span class="param-optional">Optional</span></td>
                            <td>Password for accessing the inbox. If not provided, a random password will be generated.</td>
                            <td>Random hex string</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="code-block">
                <pre><code>POST {vps_url}/create
Content-Type: application/json

{
    "api_key": "Go6Mail-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "domain": "default",
    "password": "mysecretpassword123"
}</code></pre>
            </div>

            <div class="code-block">
                <pre><code>POST {vps_url}/create
Content-Type: application/json

{
    "api_key": "Go6Mail-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "domain": "go6mail.com",
    "username": "john123"
}</code></pre>
            </div>

            <div class="code-block">
                <pre><code>POST {vps_url}/create
Content-Type: application/json

{
    "api_key": "Go6Mail-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "domain": "username@go6mail.com",
    "username": "customuser",
    "password": "mypassword"
}</code></pre>
            </div>

            <div class="response-section">
                <h3 class="param-title">
                    <i class="fas fa-reply"></i> Response
                </h3>
                
                <div class="response-example">
                    <h4>Success Response (201 Created)</h4>
                    <pre><code>{
    "status": "success",
    "address": "john12345@example.com",
    "username": "john12345",
    "domain": "example.com",
    "password": "mysecretpassword123",
    "price": 0.05
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (401 Unauthorized)</h4>
                    <pre><code>{
    "status": "error",
    "error": "Invalid API key"
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (402 Payment Required)</h4>
                    <pre><code>{
    "status": "error",
    "error": "Insufficient balance"
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (400 Bad Request)</h4>
                    <pre><code>{
    "status": "error",
    "error": "Username must be 3-32 alphanumeric characters"
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (409 Conflict)</h4>
                    <pre><code>{
    "status": "error",
    "error": "Username already taken"
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (400 Bad Request)</h4>
                    <pre><code>{
    "status": "error",
    "error": "Domain not available. Use one of your domains or a default domain"
}</code></pre>
                </div>
            </div>
        </div>

        <div class="endpoint-section">
            <div class="endpoint-header">
                <span class="endpoint-method">GET</span>
                <span class="endpoint-path">/inbox/{name}</span>
            </div>
            
            <p class="endpoint-description">
                Retrieves emails from a specific inbox. This endpoint automatically extracts Discord verification URLs 
                from email bodies and returns them in a clean format.
            </p>

            <div class="code-block">
                <pre><code>GET {vps_url}/inbox/john12345?password=mysecretpassword123

GET {vps_url}/inbox/john12345
Authorization: mysecretpassword123</code></pre>
            </div>

            <div class="response-section">
                <h3 class="param-title">
                    <i class="fas fa-reply"></i> Response
                </h3>
                
                <div class="response-example">
                    <h4>Success Response with URLs (200 OK)</h4>
                    <pre><code>{
    "status": "success",
    "verification_urls": [
        "https://click.discord.com/ls/click?upn=xxxxxxxxxxxx",
        "https://discord.com/verify?token=xxxxxxxxxxxx"
    ],
    "message": "Discord verification URLs found",
    "email_count": 3,
    "url_count": 2
}</code></pre>
                </div>

                <div class="response-example">
                    <h4>Success Response without URLs (200 OK)</h4>
                    <pre><code>{
    "status": "no_urls",
    "message": "No Discord verification URLs found in any emails",
    "email_count": 3
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (401 Unauthorized)</h4>
                    <pre><code>{
    "status": "error",
    "error": "Invalid password for this inbox"
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (404 Not Found)</h4>
                    <pre><code>{
    "status": "inbox not found"
}</code></pre>
                </div>
            </div>
        </div>

        <div class="endpoint-section">
            <div class="endpoint-header">
                <span class="endpoint-method">GET</span>
                <span class="endpoint-path">/complete_inbox/{name}</span>
            </div>
            
            <p class="endpoint-description">
                Retrieves all email details from a specific inbox, including sender, subject, body, and timestamps.
                This returns the complete email data without URL extraction.
            </p>

            <div class="code-block">
                <pre><code>GET {vps_url}/complete_inbox/john12345?password=mysecretpassword123

GET {vps_url}/complete_inbox/john12345
Authorization: mysecretpassword123</code></pre>
            </div>

            <div class="response-section">
                <h3 class="param-title">
                    <i class="fas fa-reply"></i> Response
                </h3>
                
                <div class="response-example">
                    <h4>Success Response (200 OK)</h4>
                    <pre><code>{
    "status": "success",
    "inbox_name": "john12345",
    "total_emails": 3,
    "emails": [
        {
            "id": 1,
            "sender": "noreply@discord.com",
            "subject": "Verify your Discord account",
            "body": "Please click here to verify: https://click.discord.com/verify",
            "received_at": 1678901234.567,
            "password": "mysecretpassword123"
        },
        {
            "id": 2,
            "sender": "service@example.com",
            "subject": "Welcome",
            "body": "Your account has been created",
            "received_at": 1678901200.123,
            "password": "mysecretpassword123"
        }
    ]
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (401 Unauthorized)</h4>
                    <pre><code>{
    "status": "error",
    "error": "Invalid password for this inbox"
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (404 Not Found)</h4>
                    <pre><code>{
    "status": "inbox not found"
}</code></pre>
                </div>
            </div>
        </div>

        <div class="endpoint-section">
            <div class="endpoint-header">
                <span class="endpoint-method">GET</span>
                <span class="endpoint-path">/get_all_inboxes</span>
            </div>
            
            <p class="endpoint-description">
                Retrieves all inboxes created by your API key, including email addresses, passwords, and inbox statistics.
            </p>

            <div class="code-block">
                <pre><code>GET {vps_url}/get_all_inboxes?api_key=Go6Mail-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code></pre>
            </div>

            <div class="response-section">
                <h3 class="param-title">
                    <i class="fas fa-reply"></i> Response
                </h3>
                
                <div class="response-example">
                    <h4>Success Response (200 OK)</h4>
                    <pre><code>{
    "status": "success",
    "api_key": "Go6Mail-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "total_inboxes": 2,
    "inboxes": [
        {
            "email_address": "john12345@example.com",
            "username": "john12345",
            "password": "mysecretpassword123",
            "total_emails": 3,
            "created_at": 1678901200.123,
            "last_email_at": 1678901234.567,
            "exists": true
        },
        {
            "email_address": "alice789@go6mail.com",
            "username": "alice789",
            "password": "anotherpassword456",
            "total_emails": 0,
            "exists": false
        }
    ]
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (400 Bad Request)</h4>
                    <pre><code>{
    "status": "error",
    "error": "API key required"
}</code></pre>
                </div>

                <div class="response-example error">
                    <h4>Error Response (401 Unauthorized)</h4>
                    <pre><code>{
    "status": "error",
    "error": "Invalid API key"
}</code></pre>
                </div>
            </div>
        </div>

        <div class="instructions-panel">
            <h3 class="instructions-title">
                <i class="fas fa-lightbulb"></i> Important Notes
            </h3>
            <ul class="instructions-list">
                <li>
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Always get the VPS URL from https://go6gen.pythonanywhere.com/vps_url before making API requests.</span>
                </li>
                <li>
                    <i class="fas fa-credit-card"></i>
                    <span>Each inbox creation costs a small fee (check current price via /price endpoint).</span>
                </li>
                <li>
                    <i class="fas fa-shield-alt"></i>
                    <span>Keep your API key and inbox passwords secure. They cannot be recovered if lost.</span>
                </li>
                <li>
                    <i class="fas fa-clock"></i>
                    <span>Inboxes and emails are temporary and may be automatically cleaned up after some time.</span>
                </li>
                <li>
                    <i class="fas fa-globe"></i>
                    <span>When creating an inbox with "domain": "default", a random default domain will be selected. You can also specify a specific default domain like "go6mail.com" to use that particular domain.</span>
                </li>
                <li>
                    <i class="fas fa-at"></i>
                    <span>You can provide domain as either just the domain name ("example.com") or full email address ("username@example.com"). If using full email, only the domain part will be used.</span>
                </li>
                <li>
                    <i class="fas fa-user"></i>
                    <span>Custom usernames must be 3-32 alphanumeric characters. If a username is already taken, the creation will fail.</span>
                </li>
                <li>
                    <i class="fas fa-sync-alt"></i>
                    <span>Our VPS URL may change when we change VPS. Your applications should always fetch it from our secondary api.</span>
                </li>
            </ul>
        </div>

        <div class="footer">
            <p>Go6 Mail API Documentation &copy; 2025</p>
            <p style="margin-top: 0.5rem; font-size: 0.85rem;">For support, join our Discord server</p>
        </div>
    </div>
</div>

    <div id="mails-page" class="page-section">
        <div class="mails-container">
            <h1 class="mails-title">Your Mails</h1>
            <p class="mails-subtitle">View and manage all your email inboxes</p>
            
            <div class="mails-header">
                <div class="search-container">
                    <input type="text" id="mail-search" class="search-input" placeholder="Search emails...">
                    <button id="search-btn" class="btn btn-primary">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <div style="display: flex; gap: 0.75rem;">
                    <button id="refresh-mails-btn" class="refresh-btn">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button id="create-mail-btn" class="create-mail-btn">
                        <i class="fas fa-plus"></i> Create Mail
                    </button>
                </div>
            </div>

            <div id="mails-loading" class="instructions-panel" style="text-align: center; display: none;">
                <div class="loader" style="margin: 2rem auto; width: 40px; height: 40px;"></div>
                <p>Loading your mails...</p>
            </div>

            <div id="mails-grid" class="mails-grid">
            </div>

            <div id="no-mails" class="instructions-panel" style="text-align: center; display: none;">
                <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                <h3>No Mails Found</h3>
                <p>You haven't created any inboxes yet. Create your first inbox using the "Create Mail" button.</p>
            </div>

            <div class="footer">
                <p>Go6 Mail &copy; 2025 | Total Inboxes: <span id="total-inboxes-count">0</span></p>
            </div>
        </div>
    </div>

    <div id="mailbox-page" class="page-section">
        <div class="mailbox-container">
            <div class="mailbox-header">
                <div>
                    <h1 class="mailbox-title" id="mailbox-title">Loading...</h1>
                    <p class="mailbox-subtitle" id="mailbox-subtitle"></p>
                </div>
                <button id="back-to-mails-btn" class="back-btn">
                    <i class="fas fa-arrow-left"></i> Back to Mails
                </button>
            </div>

            <div id="mailbox-loading" class="instructions-panel" style="text-align: center;">
                <div class="loader" style="margin: 2rem auto; width: 40px; height: 40px;"></div>
                <p>Loading mailbox...</p>
            </div>

            <div id="emails-list" class="emails-list" style="display: none;">
            </div>

            <div id="no-emails" class="no-emails" style="display: none;">
                <i class="fas fa-envelope-open"></i>
                <h3>No Emails Yet</h3>
                <p>This inbox hasn't received any emails yet.</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.sell.app/embed/script.js" type="module"></script>

<script>
    const baseUrl = 'https://go6gen.pythonanywhere.com';
    let currentApiKey = '';
    let vpsUrl = '';
    let currentMails = [];
    let currentViewingMailbox = null;
    let autoRefreshInterval = null;
    let isManuallyRefreshing = false;
    let selectedDomain = null;
    let userDomains = [];

    const authScreen = document.getElementById('auth-screen');
    const dashboard = document.getElementById('dashboard');
    const createKeyBtn = document.getElementById('create-key-btn');
    const loginKeyBtn = document.getElementById('login-key-btn');
    const loginForm = document.getElementById('login-form');
    const apiKeyInput = document.getElementById('api-key-input');
    const submitLoginBtn = document.getElementById('submit-login-btn');
    const cancelLoginBtn = document.getElementById('cancel-login-btn');
    const logoutBtn = document.getElementById('logout-btn');
    const balanceValue = document.getElementById('balance-value');
    const apiKeyDisplay = document.getElementById('api-key-display');
    const copyKeyBtn = document.getElementById('copy-key-btn');
    const refreshBalanceBtn = document.getElementById('refresh-balance-btn');
    const sellAppTopupBtn = document.getElementById('sell-app-topup-btn');
    const notificationContainer = document.getElementById('notification-container');
    const navLinks = document.getElementById('nav-links');
    const mailsGrid = document.getElementById('mails-grid');
    const mailSearch = document.getElementById('mail-search');
    const searchBtn = document.getElementById('search-btn');
    const refreshMailsBtn = document.getElementById('refresh-mails-btn');
    const createMailBtn = document.getElementById('create-mail-btn');
    const mailsLoading = document.getElementById('mails-loading');
    const noMails = document.getElementById('no-mails');
    const backToMailsBtn = document.getElementById('back-to-mails-btn');
    const mailboxLoading = document.getElementById('mailbox-loading');
    const emailsList = document.getElementById('emails-list');
    const noEmails = document.getElementById('no-emails');
    const mailboxTitle = document.getElementById('mailbox-title');
    const mailboxSubtitle = document.getElementById('mailbox-subtitle');
    const totalInboxesCount = document.getElementById('total-inboxes-count');
    const createMailModal = document.getElementById('create-mail-modal');
    const modalContent = document.getElementById('modal-content');
    const domainInput = document.getElementById('domain-input');
    const addDomainBtn = document.getElementById('add-domain-btn');
    const domainError = document.getElementById('domain-error');
    const domainsContainer = document.getElementById('domains-container');
    const domainsManagementSection = document.getElementById('domains-management-section');
    const noDomainsMessage = document.getElementById('no-domains-message');

    const domainsAuthScreen = document.getElementById('domains-auth-screen');
    const domainsDashboard = document.getElementById('domains-dashboard');
    const domainsCreateKeyBtn = document.getElementById('domains-create-key-btn');
    const domainsLoginKeyBtn = document.getElementById('domains-login-key-btn');
    const domainsLoginForm = document.getElementById('domains-login-form');
    const domainsApiKeyInput = document.getElementById('domains-api-key-input');
    const domainsSubmitLoginBtn = document.getElementById('domains-submit-login-btn');
    const domainsCancelLoginBtn = document.getElementById('domains-cancel-login-btn');

    function showPage(pageId) {
        if (pageId !== 'mails' && autoRefreshInterval) {
            clearInterval(autoRefreshInterval);
            autoRefreshInterval = null;
        }
        
        document.querySelectorAll('.page-section').forEach(page => {
            page.classList.remove('active');
        });
        
        document.getElementById(`${pageId}-page`).classList.add('active');
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
        });
        
        if (pageId === 'home') {
            document.querySelector('.nav-link[onclick="showPage(\'home\')"]').classList.add('active');
        } else if (pageId === 'domains') {
            document.querySelector('.nav-link[onclick="showPage(\'domains\')"]').classList.add('active');
            if (currentApiKey) {
                loadUserDomainsForDomainsPage();
            }
        } else if (pageId === 'docs') {
            document.querySelector('.nav-link[onclick="showPage(\'docs\')"]').classList.add('active');
        } else if (pageId === 'mails') {
            const mailsLink = document.querySelector('.nav-link[onclick="showPage(\'mails\')"]');
            if (mailsLink) {
                mailsLink.classList.add('mails-active');
            }
            if (currentApiKey) {
                loadMails();
                startAutoRefresh();
            }
        }
        
        return false;
    }

    function startAutoRefresh() {
        if (autoRefreshInterval) {
            clearInterval(autoRefreshInterval);
        }
        
        autoRefreshInterval = setInterval(() => {
            if (currentApiKey && document.getElementById('mails-page').classList.contains('active')) {
                refreshMailsSilently();
            }
        }, 5000);
    }

    async function refreshMailsSilently() {
        if (!currentApiKey || isManuallyRefreshing) return;
        
        try {
            const vpsUrl = await getVpsUrl();
            const response = await fetch(`${vpsUrl}/get_all_inboxes?api_key=${encodeURIComponent(currentApiKey)}`);
            const data = await response.json();
            
            if (response.ok && data.status === 'success') {
                const newMails = data.inboxes || [];
                
                newMails.sort((a, b) => {
                    const timeA = a.created_at || 0;
                    const timeB = b.created_at || 0;
                    return timeB - timeA;
                });
                
                if (JSON.stringify(newMails) !== JSON.stringify(currentMails)) {
                    currentMails = newMails;
                    totalInboxesCount.textContent = currentMails.length;
                    
                    const searchTerm = mailSearch.value.toLowerCase().trim();
                    if (searchTerm) {
                        const filteredMails = currentMails.filter(mail => 
                            mail.email_address.toLowerCase().includes(searchTerm) ||
                            mail.username.toLowerCase().includes(searchTerm)
                        );
                        renderMails(filteredMails);
                    } else {
                        renderMails(currentMails);
                    }
                }
            }
        } catch (error) {
            console.error('Error in silent refresh:', error);
        }
    }

function updateNavigation() {
    const isLoggedIn = !!currentApiKey;
    const navLinksContainer = navLinks;
    
    const existingMailsLinks = document.querySelectorAll('.nav-link[onclick="showPage(\'mails\')"]');
    existingMailsLinks.forEach(link => link.remove());
    
    const allLinks = document.querySelectorAll('.nav-link');
    allLinks.forEach(link => {
        if (link.textContent.includes('Your Mails') || link.innerHTML.includes('fa-envelope')) {
            if (!link.textContent.includes('Home') && !link.innerHTML.includes('fa-home')) {
                link.remove();
            }
        }
    });
    
    if (isLoggedIn) {
        const mailsLink = document.createElement('a');
        mailsLink.href = '#';
        mailsLink.className = 'nav-link';
        mailsLink.onclick = () => showPage('mails');
        mailsLink.innerHTML = '<i class="fas fa-envelope"></i> Your Mails';
        
        const discordLink = document.querySelector('.nav-link.discord');
        if (discordLink) {
            discordLink.parentNode.insertBefore(mailsLink, discordLink);
        } else {
            navLinksContainer.appendChild(mailsLink);
        }
    }
}

    function showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        
        let icon = 'fas fa-info-circle';
        if (type === 'success') icon = 'fas fa-check-circle';
        if (type === 'error') icon = 'fas fa-exclamation-circle';
        if (type === 'warning') icon = 'fas fa-exclamation-triangle';
        
        notification.innerHTML = `
            <i class="${icon}"></i>
            <span>${message}</span>
        `;
        
        notificationContainer.appendChild(notification);
        
        setTimeout(() => {
            notification.classList.add('show');
        }, 10);
        
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => {
                notification.remove();
            }, 400);
        }, 5000);
    }

    function formatBalance(balance) {
        const number = parseFloat(balance);
        if (isNaN(number)) return {main: "0", muted: ".00"};
        
        const fixed = number.toFixed(5);
        const parts = fixed.split('.');
        
        if (parts.length === 2) {
            const main = parts[0] + '.' + parts[1].substring(0, 2);
            const muted = parts[1].substring(2);
            
            if (muted.length > 0) {
                return {main: main, muted: muted};
            }
            return {main: main, muted: ""};
        }
        
        return {main: number.toFixed(2), muted: ""};
    }

    function formatTimestamp(timestamp) {
        if (!timestamp) return 'N/A';
        
        const date = new Date(timestamp * 1000);
        const now = new Date();
        const diff = now - date;
        
        if (diff < 24 * 60 * 60 * 1000) {
            if (diff < 60 * 1000) return 'Just now';
            if (diff < 60 * 60 * 1000) return `${Math.floor(diff / (60 * 1000))}m ago`;
            return `${Math.floor(diff / (60 * 60 * 1000))}h ago`;
        }
        
        return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    }

    async function getVpsUrl() {
        try {
            const response = await fetch(`${baseUrl}/vps_url`);
            const data = await response.json();
            
            if (data.vps_url) {
                vpsUrl = data.vps_url;
                return vpsUrl;
            } else {
                throw new Error('VPS URL not available');
            }
        } catch (error) {
            console.error('Error fetching VPS URL:', error);
            showNotification('Unable to get VPS URL. Using fallback.', 'warning');
            vpsUrl = 'https://go6gen.pythonanywhere.com';
            return vpsUrl;
        }
    }

    function validateDomainName(domain) {
        const domainRegex = /^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/;
        
        if (!domain || domain.trim() === '') {
            return {valid: false, error: 'Domain name is required'};
        }
        
        const trimmedDomain = domain.trim().toLowerCase();
        
        if (trimmedDomain.includes('@')) {
            return {valid: false, error: 'Enter domain only (e.g., example.com), not email address'};
        }
        
        if (trimmedDomain.includes(' ')) {
            return {valid: false, error: 'Domain name cannot contain spaces'};
        }
        
        if (!domainRegex.test(trimmedDomain)) {
            return {valid: false, error: 'Invalid domain format. Use format like: example.com'};
        }
        
        const parts = trimmedDomain.split('.');
        if (parts.length < 2) {
            return {valid: false, error: 'Domain must have at least one dot (e.g., example.com)'};
        }
        
        const tld = parts[parts.length - 1];
        if (tld.length < 2) {
            return {valid: false, error: 'Top-level domain (TLD) must be at least 2 characters'};
        }
        
        return {valid: true, domain: trimmedDomain};
    }

    async function addDomain() {
        const domain = domainInput.value.trim();
        
        const validation = validateDomainName(domain);
        if (!validation.valid) {
            domainError.textContent = validation.error;
            domainError.style.display = 'block';
            return;
        }
        
        domainError.style.display = 'none';
        
        addDomainBtn.innerHTML = '<div class="loader"></div> Adding...';
        addDomainBtn.disabled = true;
        
        try {
            const vpsUrl = await getVpsUrl();
            const response = await fetch(`${vpsUrl}/add_domain`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    api_key: currentApiKey,
                    domain: validation.domain
                })
            });
            
            const data = await response.json();
            
            if (response.ok && data.status === 'success') {
                showNotification(`Domain "${validation.domain}" added successfully!`, 'success');
                domainInput.value = '';
                
                await loadUserDomainsForDomainsPage();
            } else {
                throw new Error(data.error || 'Failed to add domain');
            }
        } catch (error) {
            console.error('Error adding domain:', error);
            showNotification(`Error: ${error.message}`, 'error');
            domainError.textContent = error.message;
            domainError.style.display = 'block';
        } finally {
            addDomainBtn.innerHTML = '<i class="fas fa-plus"></i> Add Domain';
            addDomainBtn.disabled = false;
        }
    }

    async function loadUserDomainsForDomainsPage() {
        if (!currentApiKey) return;
        
        try {
            const vpsUrl = await getVpsUrl();
            const response = await fetch(`${vpsUrl}/get_domains?api_key=${encodeURIComponent(currentApiKey)}`);
            const data = await response.json();
            
            if (response.ok && data.status === 'success') {
                userDomains = data.your_domains || [];
                
                if (userDomains.length > 0) {
                    domainsManagementSection.style.display = 'block';
                    noDomainsMessage.style.display = 'none';
                    renderDomains(userDomains);
                } else {
                    domainsManagementSection.style.display = 'none';
                    noDomainsMessage.style.display = 'block';
                }
            }
        } catch (error) {
            console.error('Error loading domains:', error);
            domainsManagementSection.style.display = 'none';
            noDomainsMessage.style.display = 'block';
        }
    }

    function renderDomains(domains) {
        domainsContainer.innerHTML = '';
        
        domains.forEach(domain => {
            const domainCard = document.createElement('div');
            domainCard.className = 'domain-card';
            
            domainCard.innerHTML = `
                <div class="domain-card-header">
                    <div class="domain-name">${domain}</div>
                    <div class="domain-type custom">Custom</div>
                </div>
                <div class="domain-actions">
                    <button class="domain-action-btn" onclick="useDomain('${domain}')">
                        <i class="fas fa-envelope"></i> Use
                    </button>
                    <button class="domain-action-btn remove" onclick="removeDomain('${domain}')">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                </div>
            `;
            
            domainsContainer.appendChild(domainCard);
        });
    }

    function useDomain(domain) {
        showCreateMailModal();
        setTimeout(() => {
            if (document.getElementById('create-mail-modal').classList.contains('active')) {
                selectDomain(domain);
            }
        }, 500);
    }

    function removeDomain(domain) {
        if (confirm(`Are you sure you want to remove domain "${domain}"?`)) {
            showNotification(`Domain removal feature coming soon!`, 'info');
        }
    }

    async function createNewKey() {
        createKeyBtn.innerHTML = '<div class="loader"></div> Creating...';
        createKeyBtn.disabled = true;
        
        try {
            const vpsUrl = await getVpsUrl();
            const response = await fetch(`${vpsUrl}/register_key`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
            });
            
            const data = await response.json();
            
            if (data.status === 'success') {
                currentApiKey = data.api_key;
                localStorage.setItem('go6mailapikey', currentApiKey);
                showNotification('API key created successfully!', 'success');
                loadDashboard();
                loadDomainsDashboard();
            } else {
                throw new Error(data.error || 'Failed to create API key');
            }
        } catch (error) {
            console.error('Error creating API key:', error);
            showNotification(`Error: ${error.message}`, 'error');
        } finally {
            createKeyBtn.innerHTML = '<i class="fas fa-key"></i> Create New API Key';
            createKeyBtn.disabled = false;
        }
    }

    async function loginWithKey(apiKey) {
        const activeSubmitBtn = submitLoginBtn.innerHTML.includes('loader') ? submitLoginBtn : domainsSubmitLoginBtn;
        activeSubmitBtn.innerHTML = '<div class="loader"></div> Logging in...';
        activeSubmitBtn.disabled = true;
        
        try {
            const response = await fetch(`${baseUrl}/balance?api_key=${encodeURIComponent(apiKey)}`);
            const data = await response.json();
            
            if (response.ok) {
                currentApiKey = apiKey;
                localStorage.setItem('go6mailapikey', currentApiKey);
                showNotification('Logged in successfully!', 'success');
                loadDashboard();
                loadDomainsDashboard();
            } else {
                throw new Error(data.error || 'Invalid API key');
            }
        } catch (error) {
            console.error('Error logging in:', error);
            showNotification(`Error: ${error.message}`, 'error');
        } finally {
            activeSubmitBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
            activeSubmitBtn.disabled = false;
        }
    }

async function loadDashboard() {
    authScreen.style.display = 'none';
    dashboard.style.display = 'block';
    apiKeyDisplay.textContent = currentApiKey;
    updateNavigation();
    await updateBalance();
    await updatePriceDisplay();
}
    function loadDomainsDashboard() {
        domainsAuthScreen.style.display = 'none';
        domainsDashboard.style.display = 'block';
        loadUserDomainsForDomainsPage();
    }

async function updateBalance() {
    try {
        const response = await fetch(`${baseUrl}/balance?api_key=${encodeURIComponent(currentApiKey)}`);
        const data = await response.json();
        
        if (response.ok) {
            const formatted = formatBalance(data.balance);
            balanceValue.innerHTML = `<span class="balance-main">${formatted.main}</span><span class="balance-muted">${formatted.muted}</span>`;
            
            balanceValue.querySelector('.balance-main').style.color = '#10b981';
            setTimeout(() => {
                balanceValue.querySelector('.balance-main').style.color = '';
            }, 1000);
            
            await updateMailsLeftDisplay();
            
            return data.balance;
        } else {
            throw new Error(data.error || 'Failed to fetch balance');
        }
    } catch (error) {
        console.error('Error fetching balance:', error);
        balanceValue.innerHTML = '<span class="balance-main">0</span><span class="balance-muted">.00</span>';
        showNotification(`Error fetching balance: ${error.message}`, 'error');
        return '0.00';
    }
}


    async function loadMails() {
        if (!currentApiKey) return;
        
        try {
            mailsGrid.innerHTML = '';
            mailsLoading.style.display = 'block';
            noMails.style.display = 'none';
            refreshMailsBtn.classList.add('loading');
            refreshMailsBtn.disabled = true;
            if (createMailBtn) {
                createMailBtn.classList.add('loading');
                createMailBtn.disabled = true;
            }
            isManuallyRefreshing = true;
            
            const vpsUrl = await getVpsUrl();
            const response = await fetch(`${vpsUrl}/get_all_inboxes?api_key=${encodeURIComponent(currentApiKey)}`);
            const data = await response.json();
            
            if (response.ok && data.status === 'success') {
                currentMails = data.inboxes || [];
                
                currentMails.sort((a, b) => {
                    const timeA = a.created_at || 0;
                    const timeB = b.created_at || 0;
                    return timeB - timeA;
                });
                
                totalInboxesCount.textContent = currentMails.length;
                
                if (currentMails.length === 0) {
                    mailsLoading.style.display = 'none';
                    noMails.style.display = 'block';
                } else {
                    renderMails(currentMails);
                    mailsLoading.style.display = 'none';
                }
            } else {
                throw new Error(data.error || 'Failed to load mails');
            }
        } catch (error) {
            console.error('Error loading mails:', error);
            showNotification(`Error: ${error.message}`, 'error');
            mailsLoading.style.display = 'none';
            noMails.style.display = 'block';
        } finally {
            refreshMailsBtn.classList.remove('loading');
            refreshMailsBtn.disabled = false;
            if (createMailBtn) {
                createMailBtn.classList.remove('loading');
                createMailBtn.disabled = false;
            }
            isManuallyRefreshing = false;
        }
    }
function renderMails(mails) {
    if (mails.length === 0) {
        mailsGrid.innerHTML = `
            <div class="instructions-panel" style="text-align: center;">
                <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                <h3>No Mails Found</h3>
                <p>You haven't created any inboxes yet. Create your first inbox using the "Create Mail" button.</p>
            </div>
        `;
        return;
    }
    
    mailsGrid.innerHTML = `
        <div class="mails-table-container">
            <table class="mails-table">
                <thead>
                    <tr>
                        <th>Email Address</th>
                        <th>Password</th>
                        <th>Status</th>
                        <th>Emails</th>
                        <th>Created</th>
                        <th>Last Email</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="mails-table-body">
                </tbody>
            </table>
        </div>
`;
    
    const tableBody = document.getElementById('mails-table-body');
    
    mails.forEach(mail => {
        const row = document.createElement('tr');
        row.onclick = () => viewMailbox(mail);
    
        const status = mail.exists ? 'active' : 'inactive';
        const statusIcon = mail.exists ? 'fa-check-circle' : 'fa-times-circle';
        const emailCount = mail.total_emails || 0;
        const createdTime = formatTimestamp(mail.created_at);
        const lastEmailTime = formatTimestamp(mail.last_email_at);
    
        const passwordId = `password-${mail.username}`;
    
row.innerHTML = `
    <td class="email-cell">${mail.email_address}</td>
    <td class="password-cell">
        <div class="password-field">
            <span id="${passwordId}" class="password-text password-masked">
                
            </span>
            <button class="password-toggle" onclick="event.stopPropagation(); togglePassword('${passwordId}', '${mail.password.replace(/'/g, "\\'")}')">
                <i class="fas fa-eye"></i>
            </button>
        </div>
    </td>
    <td>
        <span class="status-badge status-${status}">
            <i class="fas ${statusIcon}"></i>
            ${status === 'active' ? 'Active' : 'Inactive'}
        </span>
    </td>
    <td>${emailCount}</td>
    <td>${createdTime}</td>
    <td>${lastEmailTime !== 'N/A' ? lastEmailTime : 'Never'}</td>
    <td>
        <div class="table-actions">
            <button class="table-btn view" onclick="event.stopPropagation(); viewMailbox(${JSON.stringify(mail).replace(/"/g, '&quot;')})">
                <i class="fas fa-eye"></i> View
            </button>
            <button class="table-btn copy" onclick="event.stopPropagation(); copyToClipboard('${mail.email_address}')">
                <i class="fas fa-copy"></i> Copy Email
            </button>
            <button class="table-btn share" onclick="event.stopPropagation(); shareInbox('${mail.username}', '${mail.password}')">
                <i class="fas fa-share-alt"></i> Share
            </button>
        </div>
    </td>
`;
    
        tableBody.appendChild(row);
    });
}

function togglePassword(passwordElementId, actualPassword) {
    const passwordElement = document.getElementById(passwordElementId);
    if (!passwordElement) return;
    
    const toggleButton = passwordElement.parentElement.querySelector('.password-toggle');
    const icon = toggleButton.querySelector('i');
    
    if (passwordElement.classList.contains('password-masked')) {
        passwordElement.textContent = actualPassword;
        passwordElement.classList.remove('password-masked');
        icon.className = 'fas fa-eye-slash';
        toggleButton.classList.add('active');
        
        setTimeout(() => {
            if (passwordElement && !passwordElement.classList.contains('password-masked')) {
                passwordElement.textContent = '';
                passwordElement.classList.add('password-masked');
                icon.className = 'fas fa-eye';
                toggleButton.classList.remove('active');
            }
        }, 5000);
    } else {
        passwordElement.textContent = '';
        passwordElement.classList.add('password-masked');
        icon.className = 'fas fa-eye';
        toggleButton.classList.remove('active');
    }
}




    async function viewMailbox(mail) {
        currentViewingMailbox = mail;
        
        showPage('mailbox');
        
        mailboxTitle.textContent = mail.email_address;
        mailboxSubtitle.textContent = `${mail.total_emails || 0} emails`;
        
        mailboxLoading.style.display = 'block';
        emailsList.style.display = 'none';
        noEmails.style.display = 'none';
        
        try {
            const vpsUrl = await getVpsUrl();
            const response = await fetch(`${vpsUrl}/complete_inbox/${mail.username}?password=${encodeURIComponent(mail.password)}`);
            const data = await response.json();
            
            if (response.ok && data.status === 'success') {
                const emails = data.emails || [];
                
                if (emails.length === 0) {
                    mailboxLoading.style.display = 'none';
                    noEmails.style.display = 'block';
                } else {
                    renderEmails(emails);
                    mailboxLoading.style.display = 'none';
                    emailsList.style.display = 'block';
                }
            } else {
                throw new Error(data.error || 'Failed to load emails');
            }
        } catch (error) {
            console.error('Error loading mailbox:', error);
            showNotification(`Error: ${error.message}`, 'error');
            mailboxLoading.style.display = 'none';
            noEmails.style.display = 'block';
        }
    }

    function renderEmails(emails) {
        emailsList.innerHTML = '';
        
        emails.sort((a, b) => b.received_at - a.received_at);
        
        emails.forEach(email => {
            const emailItem = document.createElement('div');
            emailItem.className = 'email-item';
            
            const emailTime = formatTimestamp(email.received_at);
            const emailBody = email.body || '';
            
            emailItem.innerHTML = `
                <div class="email-header">
                    <div class="email-sender">${email.sender || 'Unknown'}</div>
                    <div class="email-time">${emailTime}</div>
                </div>
                <div class="email-subject">${email.subject || 'No Subject'}</div>
                <div class="email-body">${escapeHtml(emailBody)}</div>
            `;
            
            emailsList.appendChild(emailItem);
        });
    }

    async function showCreateMailModal() {
        if (!currentApiKey) {
            showNotification('Please login first', 'warning');
            return;
        }
        
        selectedDomain = null;
        
        modalContent.innerHTML = `
            <div class="modal-loading">
                <div class="loader"></div>
                <p>Loading domains...</p>
            </div>
        `;
        
        createMailModal.classList.add('active');
        
        try {
            const vpsUrl = await getVpsUrl();
            const response = await fetch(`${vpsUrl}/get_domains?api_key=${encodeURIComponent(currentApiKey)}`);
            const data = await response.json();
            
            if (response.ok && data.status === 'success') {
                renderCreateMailForm(data.default_domains, data.your_domains);
            } else {
                throw new Error(data.error || 'Failed to load domains');
            }
        } catch (error) {
            console.error('Error loading domains:', error);
            modalContent.innerHTML = `
                <div class="result-error">
                    <h4 class="result-title">Error</h4>
                    <p>Failed to load domains: ${error.message}</p>
                    <button class="copy-result-btn" onclick="closeCreateMailModal()" style="margin-top: 1rem;">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            `;
        }
    }

function renderCreateMailForm(defaultDomains, userDomains) {
    modalContent.innerHTML = `
        <div class="input-group">
            <label class="input-label" for="username-input">
                <i class="fas fa-user"></i> Username (optional)
            </label>
            <input type="text" id="username-input" class="input-field" placeholder="Leave empty for random username">
            <div class="input-note" style="color: var(--text-muted); font-size: 0.85rem; margin-top: 0.25rem;">
                Must be 3-32 alphanumeric characters. If username is taken, creation will fail.
            </div>
        </div>
        
        <div class="input-group">
            <label class="input-label" for="password-input">
                <i class="fas fa-lock"></i> Password (optional)
            </label>
            <input type="text" id="password-input" class="input-field" placeholder="Leave empty for random password">
        </div>
        
        <div class="domain-separator">
            <span>Choose your domain</span>
        </div>
        
        <div class="domains-section">
            <h4 class="domains-title">Default Domains</h4>
            <div id="default-domains-grid" class="domains-grid">
                ${defaultDomains.length > 0 ? 
                    defaultDomains.map(domain => `
                        <button class="domain-btn" onclick="selectDomain('${domain}')">${domain}</button>
                    `).join('') : 
                    '<div class="no-domains">No default domains available</div>'
                }
            </div>
        </div>
        
        <div class="domain-separator">
            <span>Your Domains</span>
        </div>
        
        <div class="domains-section">
            <h4 class="domains-title">Your Custom Domains</h4>
            <div id="user-domains-grid" class="domains-grid">
                ${userDomains.length > 0 ? 
                    userDomains.map(domain => `
                        <button class="domain-btn" onclick="selectDomain('${domain}')">${domain}</button>
                    `).join('') : 
                    '<div class="no-domains">None added yet</div>'
                }
            </div>
        </div>
        
        <div style="margin-top: 2rem; display: flex; gap: 0.75rem;">
            <button id="create-mail-submit-btn" class="btn btn-primary" style="flex: 1;" onclick="submitCreateMail()" disabled>
                <i class="fas fa-plus"></i> Create Mail
            </button>
            <button class="btn btn-secondary" style="flex: 1;" onclick="closeCreateMailModal()">
                <i class="fas fa-times"></i> Cancel
            </button>
        </div>
        
        <div id="domain-selected-notice" style="margin-top: 1rem; padding: 0.75rem; background-color: rgba(59, 130, 246, 0.1); border-radius: var(--radius); border: 1px solid rgba(59, 130, 246, 0.3); display: none;">
            <i class="fas fa-check-circle" style="color: var(--primary);"></i>
            <span style="margin-left: 0.5rem;">Selected domain: <strong id="selected-domain-text"></strong></span>
        </div>
    `;
}
    function selectDomain(domain) {
        selectedDomain = domain;
        
        document.querySelectorAll('.domain-btn').forEach(btn => {
            btn.classList.remove('selected');
            if (btn.textContent === domain) {
                btn.classList.add('selected');
            }
        });
        
        document.getElementById('create-mail-submit-btn').disabled = false;
        
        const notice = document.getElementById('domain-selected-notice');
        const domainText = document.getElementById('selected-domain-text');
        if (notice && domainText) {
            domainText.textContent = domain;
            notice.style.display = 'flex';
        }
    }

async function submitCreateMail() {
    if (!selectedDomain) {
        showNotification('Please select a domain', 'warning');
        return;
    }
    
    const usernameInput = document.getElementById('username-input');
    const passwordInput = document.getElementById('password-input');
    
    const username = usernameInput ? usernameInput.value.trim() : '';
    const password = passwordInput ? passwordInput.value.trim() : '';
    
    const submitBtn = document.getElementById('create-mail-submit-btn');
    
    submitBtn.innerHTML = '<div class="loader"></div> Creating...';
    submitBtn.disabled = true;
    
    try {
        const vpsUrl = await getVpsUrl();
        
        const payload = {
            api_key: currentApiKey,
            domain: selectedDomain
        };
        
        if (username) {
            payload.username = username;
        }
        if (password) {
            payload.password = password;
        }
        
        const response = await fetch(`${vpsUrl}/create`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(payload)
        });
        
        const data = await response.json();
        
        if (response.ok && data.status === 'success') {
            modalContent.innerHTML = `
                <div class="result-success">
                    <h4 class="result-title">Mail Created Successfully!</h4>
                    <div class="result-info">
                        <div class="result-item">
                            <span class="result-label">Email:</span>
                            <span class="result-value">${data.address}</span>
                        </div>
                        ${data.username ? `
                        <div class="result-item">
                            <span class="result-label">Username:</span>
                            <span class="result-value">${data.username}</span>
                        </div>
                        ` : ''}
                        <div class="result-item">
                            <span class="result-label">Password:</span>
                            <span class="result-value">${data.password}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Domain:</span>
                            <span class="result-value">${data.domain}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Price:</span>
                            <span class="result-value">$${data.price}</span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 0.5rem; justify-content: center;">
                        <button class="copy-result-btn" onclick="copyToClipboard('${data.address}')">
                            <i class="fas fa-copy"></i> Copy Email
                        </button>
                        <button class="copy-result-btn" onclick="copyToClipboard('${data.password}')">
                            <i class="fas fa-copy"></i> Copy Password
                        </button>
                    </div>
                    <button class="copy-result-btn" onclick="closeCreateMailModalAndRefresh()" style="margin-top: 1rem;">
                        <i class="fas fa-check"></i> Done
                    </button>
                </div>
            `;
            
            await updateBalance();
        } else {
            throw new Error(data.error || 'Failed to create mail');
        }
    } catch (error) {
        console.error('Error creating mail:', error);
        modalContent.innerHTML = `
            <div class="result-error">
                <h4 class="result-title">Error</h4>
                <p>${error.message}</p>
                <button class="copy-result-btn" onclick="showCreateMailModal()" style="margin-top: 1rem;">
                    <i class="fas fa-redo"></i> Try Again
                </button>
            </div>
        `;
    }
}

    function closeCreateMailModalAndRefresh() {
        closeCreateMailModal();
        loadMails();
    }

    function closeCreateMailModal() {
        createMailModal.classList.remove('active');
        selectedDomain = null;
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
            showNotification('Copied to clipboard!', 'success');
        }).catch(err => {
            console.error('Failed to copy: ', err);
            showNotification('Failed to copy', 'error');
        });
    }

    function copyApiKey() {
        copyToClipboard(currentApiKey);
        copyKeyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
        copyKeyBtn.classList.add('copied');
        
        setTimeout(() => {
            copyKeyBtn.innerHTML = '<i class="fas fa-copy"></i> Copy';
            copyKeyBtn.classList.remove('copied');
        }, 2000);
    }

    function logout() {
        currentApiKey = '';
        apiKeyInput.value = '';
        dashboard.style.display = 'none';
        authScreen.style.display = 'block';
        loginForm.style.display = 'none';
        
        domainsAuthScreen.style.display = 'block';
        domainsDashboard.style.display = 'none';
        domainsLoginForm.style.display = 'none';
        domainsApiKeyInput.value = '';
        
        localStorage.removeItem('go6mailapikey');
        
        updateNavigation();
        
        if (autoRefreshInterval) {
            clearInterval(autoRefreshInterval);
            autoRefreshInterval = null;
        }
        
        showNotification('Logged out successfully', 'info');
    }
function searchMails() {
    const searchTerm = mailSearch.value.toLowerCase().trim();
    
    if (!searchTerm) {
        renderMails(currentMails);
        return;
    }
    
    const filteredMails = currentMails.filter(mail => 
        mail.email_address.toLowerCase().includes(searchTerm) ||
        mail.username.toLowerCase().includes(searchTerm)
    );
    
    renderMails(filteredMails);
    
    if (filteredMails.length > 0) {
        showNotification(`Found ${filteredMails.length} inbox${filteredMails.length !== 1 ? 'es' : ''} matching "${searchTerm}"`, 'info');
    }
}

    createKeyBtn.addEventListener('click', createNewKey);
    
    loginKeyBtn.addEventListener('click', () => {
        loginForm.style.display = 'block';
        loginKeyBtn.style.display = 'none';
        createKeyBtn.style.display = 'none';
        
        setTimeout(() => {
            apiKeyInput.focus();
        }, 100);
    });
    
    cancelLoginBtn.addEventListener('click', () => {
        loginForm.style.display = 'none';
        loginKeyBtn.style.display = 'flex';
        createKeyBtn.style.display = 'flex';
        apiKeyInput.value = '';
    });
    
    submitLoginBtn.addEventListener('click', () => {
        const key = apiKeyInput.value.trim();
        if (key) {
            loginWithKey(key);
        } else {
            showNotification('Please enter an API key', 'warning');
            apiKeyInput.focus();
        }
    });
    
    apiKeyInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const key = apiKeyInput.value.trim();
            if (key) {
                loginWithKey(key);
            }
        }
    });
    
    logoutBtn.addEventListener('click', logout);
    copyKeyBtn.addEventListener('click', copyApiKey);
    
refreshBalanceBtn.addEventListener('click', async () => {
    refreshBalanceBtn.innerHTML = '<div class="loader"></div> Refreshing...';
    const oldBalance = balanceValue.textContent;
    const newBalance = await updateBalance();
    const newPrice = await updatePriceDisplay();
    
    const formattedNew = formatBalance(newBalance);
    const formattedOld = formatBalance(oldBalance);
    
    if (formattedOld.main !== formattedNew.main) {
        showNotification(`Balance updated! New balance: $${formattedNew.main}${formattedNew.muted}`, 'success');
    } else {
        showNotification('Dashboard refreshed', 'info');
    }
    
    refreshBalanceBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh';
});

    sellAppTopupBtn.addEventListener('click', function(e) {
        if (!currentApiKey) {
            e.preventDefault();
            showNotification('Please login first to add funds', 'warning');
            return;
        }
        
        showNotification('Opening payment modal...', 'info');
    });

    domainsCreateKeyBtn.addEventListener('click', createNewKey);
    
    domainsLoginKeyBtn.addEventListener('click', () => {
        domainsLoginForm.style.display = 'block';
        domainsLoginKeyBtn.style.display = 'none';
        domainsCreateKeyBtn.style.display = 'none';
        
        setTimeout(() => {
            domainsApiKeyInput.focus();
        }, 100);
    });
    
    domainsCancelLoginBtn.addEventListener('click', () => {
        domainsLoginForm.style.display = 'none';
        domainsLoginKeyBtn.style.display = 'flex';
        domainsCreateKeyBtn.style.display = 'flex';
        domainsApiKeyInput.value = '';
    });
    
    domainsSubmitLoginBtn.addEventListener('click', () => {
        const key = domainsApiKeyInput.value.trim();
        if (key) {
            loginWithKey(key);
        } else {
            showNotification('Please enter an API key', 'warning');
            domainsApiKeyInput.focus();
        }
    });
    
    domainsApiKeyInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const key = domainsApiKeyInput.value.trim();
            if (key) {
                loginWithKey(key);
            }
        }
    });

    refreshMailsBtn.addEventListener('click', loadMails);
    createMailBtn.addEventListener('click', showCreateMailModal);
    searchBtn.addEventListener('click', searchMails);
    mailSearch.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            searchMails();
        }
    });
    
    backToMailsBtn.addEventListener('click', () => {
        showPage('mails');
    });

    addDomainBtn.addEventListener('click', addDomain);
    domainInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            addDomain();
        }
    });

    domainInput.addEventListener('blur', () => {
        const domain = domainInput.value.trim();
        if (domain) {
            const validation = validateDomainName(domain);
            if (!validation.valid) {
                domainError.textContent = validation.error;
                domainError.style.display = 'block';
            } else {
                domainError.style.display = 'none';
            }
        } else {
            domainError.style.display = 'none';
        }
    });

    createMailModal.addEventListener('click', (e) => {
        if (e.target === createMailModal) {
            closeCreateMailModal();
        }
    });

    document.addEventListener('DOMContentLoaded', () => {
        const savedKey = localStorage.getItem('go6mailapikey');
        if (savedKey) {
            currentApiKey = savedKey;
            loadDashboard();
            loadDomainsDashboard();
        }
        
        getVpsUrl();
        
        setTimeout(() => {
            showNotification('Welcome to Go6 Mail!', 'info');
        }, 1000);
    });

async function getCurrentPrice() {
    try {
        const response = await fetch(`${baseUrl}/price`);
        const data = await response.json();
        
        if (response.ok && data.price !== undefined) {
            return data.price;
        } else {
            throw new Error(data.error || 'Failed to get price');
        }
    } catch (error) {
        console.error('Error fetching price:', error);
        return 0.05;
    }
}

async function updatePriceDisplay() {
    try {
        const price = await getCurrentPrice();
        const priceElement = document.getElementById('price-value');
        
        if (priceElement) {
            const priceStr = price.toString();
            
            if (price < 0.001) {
                priceElement.textContent = price.toFixed(6).replace(/\.?0+$/, '');
            } else if (price < 0.01) {
                priceElement.textContent = price.toFixed(4).replace(/\.?0+$/, '');
            } else if (price < 0.1) {
                priceElement.textContent = price.toFixed(3).replace(/\.?0+$/, '');
            } else if (price < 1) {
                priceElement.textContent = price.toFixed(2).replace(/\.?0+$/, '');
            } else {
                priceElement.textContent = price.toFixed(2);
            }
        }
        
        await updateMailsLeftDisplay();
        
        return price;
    } catch (error) {
        console.error('Error updating price display:', error);
        const priceElement = document.getElementById('price-value');
        if (priceElement) {
            priceElement.textContent = '0.050';
        }
        return 0.05;
    }
}


function calculateMailsLeft(balance, pricePerMail) {
    if (!balance || !pricePerMail || pricePerMail <= 0) {
        return 0;
    }
    
    const balanceNum = typeof balance === 'string' ? parseFloat(balance) : balance;
    const priceNum = typeof pricePerMail === 'string' ? parseFloat(pricePerMail) : pricePerMail;
    
    if (isNaN(balanceNum) || isNaN(priceNum) || priceNum <= 0) {
        return 0;
    }
    
    const mailsLeft = Math.floor(balanceNum / priceNum);
    
    return mailsLeft;
}

async function updateMailsLeftDisplay() {
    try {
        const balanceResponse = await fetch(`${baseUrl}/balance?api_key=${encodeURIComponent(currentApiKey)}`);
        const balanceData = await balanceResponse.json();
        
        if (!balanceResponse.ok) {
            document.getElementById('mails-left-count').textContent = '0';
            return;
        }
        
        const balance = balanceData.balance || 0;
        
        const price = await getCurrentPrice();
        
        const mailsLeft = calculateMailsLeft(balance, price);
        
        const mailsLeftElement = document.getElementById('mails-left-count');
        if (mailsLeftElement) {
            mailsLeftElement.textContent = mailsLeft;
            
            if (mailsLeft === 0) {
                mailsLeftElement.style.color = 'var(--error)';
            } else if (mailsLeft < 10) {
                mailsLeftElement.style.color = 'var(--warning)';
            } else {
                mailsLeftElement.style.color = 'var(--success)';
            }
        }
        
        return mailsLeft;
    } catch (error) {
        console.error('Error updating mails left:', error);
        const mailsLeftElement = document.getElementById('mails-left-count');
        if (mailsLeftElement) {
            mailsLeftElement.textContent = '0';
            mailsLeftElement.style.color = 'var(--error)';
        }
        return 0;
    }
}

function shareInbox(username, password) {
    const encodedUsername = encodeURIComponent(username);
    const encodedPassword = encodeURIComponent(password);
    
    const shareUrl = `${window.location.origin}${window.location.pathname}#share/${encodedUsername}&${encodedPassword}`;
    
    navigator.clipboard.writeText(shareUrl).then(() => {
        showNotification('Share link copied to clipboard! Anyone can view this inbox with this link.', 'success');
    }).catch(err => {
        console.error('Failed to copy: ', err);
        showNotification('Failed to copy share link', 'error');
    });
    
    console.log('Share URL:', shareUrl);
}


















document.addEventListener('DOMContentLoaded', () => {
    if (window.location.hash && window.location.hash.startsWith('#share/')) {
        const hash = window.location.hash.substring(7);
        const parts = hash.split('&');
        
        if (parts.length === 2) {
            const username = decodeURIComponent(parts[0]);
            const password = decodeURIComponent(parts[1]);
            
            showSharedInbox(username, password);
        }
    }
    
    const savedKey = localStorage.getItem('go6mailapikey');
    if (savedKey) {
        currentApiKey = savedKey;
        loadDashboard();
        loadDomainsDashboard();
    }
    
    getVpsUrl();
    
    setTimeout(() => {
        showNotification('Welcome to Go6 Mail!', 'info');
    }, 1000);
});

async function showSharedInbox(username, password) {
    document.querySelectorAll('.page-section').forEach(page => {
        page.style.display = 'none';
    });
    document.querySelector('.navbar').style.display = 'none';
    
    const viewerContainer = document.createElement('div');
    viewerContainer.id = 'shared-inbox-viewer';
    viewerContainer.style.cssText = `
        min-height: 100vh;
        background-color: var(--bg-dark);
        color: var(--text-primary);
        padding: 2rem;
    `;
    
    viewerContainer.innerHTML = `
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border);">
                <h1 style="font-size: 1.5rem; margin-bottom: 0.5rem;">
                    <i class="fas fa-envelope" style="color: var(--primary);"></i>
                    Shared Inbox Viewer
                </h1>
                <p style="color: var(--text-secondary);">Viewing shared inbox: ${username}</p>
                <button id="back-to-site" style="
                    margin-top: 1rem;
                    padding: 0.5rem 1rem;
                    background-color: transparent;
                    color: var(--text-secondary);
                    border: 1px solid var(--border);
                    border-radius: var(--radius);
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                ">
                    <i class="fas fa-arrow-left"></i> Back to Site
                </button>
            </div>
            
            <div id="shared-inbox-loading" style="text-align: center; padding: 3rem;">
                <div class="loader" style="margin: 0 auto; width: 40px; height: 40px;"></div>
                <p style="margin-top: 1rem; color: var(--text-secondary);">Loading shared inbox...</p>
            </div>
            
            <div id="shared-emails-list" class="emails-list" style="display: none;"></div>
            
            <div id="shared-no-emails" style="text-align: center; padding: 3rem; color: var(--text-muted); display: none;">
                <i class="fas fa-envelope-open" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                <h3>No Emails Yet</h3>
                <p>This inbox hasn't received any emails yet.</p>
            </div>
            
            <div id="shared-error" style="text-align: center; padding: 3rem; color: var(--error); display: none;"></div>
        </div>
    `;
    
    document.body.appendChild(viewerContainer);
    
    document.getElementById('back-to-site').addEventListener('click', () => {
        history.replaceState(null, '', window.location.pathname + window.location.search);
        viewerContainer.remove();
        document.querySelectorAll('.page-section').forEach(page => {
            page.style.display = '';
        });
        document.querySelector('.navbar').style.display = '';
        showPage('home');
    });
    
    try {
        const vpsUrl = await getVpsUrl();
        const response = await fetch(`${vpsUrl}/complete_inbox/${username}?password=${encodeURIComponent(password)}`);
        const data = await response.json();
        
        document.getElementById('shared-inbox-loading').style.display = 'none';
        
        if (response.ok && data.status === 'success') {
            const emails = data.emails || [];
            
            if (emails.length === 0) {
                document.getElementById('shared-no-emails').style.display = 'block';
            } else {
                renderSharedEmails(emails);
                document.getElementById('shared-emails-list').style.display = 'block';
            }
        } else {
            document.getElementById('shared-error').style.display = 'block';
            document.getElementById('shared-error').innerHTML = `
                <i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                <h3>Error Loading Inbox</h3>
                <p>${data.error || 'Failed to load inbox'}</p>
            `;
        }
    } catch (error) {
        document.getElementById('shared-inbox-loading').style.display = 'none';
        document.getElementById('shared-error').style.display = 'block';
        document.getElementById('shared-error').innerHTML = `
            <i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 1rem;"></i>
            <h3>Error Loading Inbox</h3>
            <p>${error.message}</p>
        `;
    }
}

function renderSharedEmails(emails) {
    const emailsList = document.getElementById('shared-emails-list');
    emailsList.innerHTML = '';
    
    emails.sort((a, b) => b.received_at - a.received_at);
    
    emails.forEach(email => {
        const emailItem = document.createElement('div');
        emailItem.className = 'email-item';
        
        const emailTime = formatTimestamp(email.received_at);
        const emailBody = email.body || '';
        
        emailItem.innerHTML = `
            <div class="email-header">
                <div class="email-sender">${email.sender || 'Unknown'}</div>
                <div class="email-time">${emailTime}</div>
            </div>
            <div class="email-subject">${email.subject || 'No Subject'}</div>
            <div class="email-body">${escapeHtml(emailBody)}</div>
        `;
        
        emailsList.appendChild(emailItem);
    });
}
</script>
</body>
</html>